!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Decimal=n()}(this,function(){"use strict";for(var t=function(t,n,e){if(null==t||null==n)return t;var o=String(t),r="number"==typeof n?n:parseInt(n,10);if(isNaN(r)||!isFinite(r))return o;var i=o.length;if(i>=r)return o;var s=null==e?"":String(e);""===s&&(s=" ");for(var a=r-i;s.length<a;)s+=s;return o+(s.length>a?s.substr(0,a):s)},n=[],e=-323;e<=308;e++)n.push(Number("1e"+e));return function(){function e(t){this.mantissa=NaN,this.exponent=NaN,t instanceof e?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.mantissa=0,this.exponent=0)}return e.prototype.normalize=function(){if(0==this.mantissa)return this.mantissa=0,void(this.exponent=0);if(!(this.mantissa>=1&&this.mantissa<10)){var t=Math.floor(Math.log10(Math.abs(this.mantissa)));return this.mantissa=this.mantissa/n[t+323],this.exponent+=t,this}},e.prototype.fromMantissaExponent=function(t,n){return isFinite(t)&&isFinite(n)||(t=Number.NaN,n=Number.NaN),this.mantissa=t,this.exponent=n,this.normalize(),this},e.prototype.fromMantissaExponent_noNormalize=function(t,n){return this.mantissa=t,this.exponent=n,this},e.prototype.fromDecimal=function(t){return this.mantissa=t.mantissa,this.exponent=t.exponent,this},e.prototype.fromNumber=function(t){return isNaN(t)?(this.mantissa=Number.NaN,this.exponent=Number.NaN):t==Number.POSITIVE_INFINITY?(this.mantissa=1,this.exponent=9e15):t==Number.NEGATIVE_INFINITY?(this.mantissa=-1,this.exponent=9e15):0==t?(this.mantissa=0,this.exponent=0):(this.exponent=Math.floor(Math.log10(Math.abs(t))),-324==this.exponent?this.mantissa=10*t/1e-323:this.mantissa=t/n[this.exponent+323],this.normalize()),this},e.prototype.fromString=function(t){if(-1!=t.indexOf("e")){var n=t.split("e");this.mantissa=parseFloat(n[0]),this.exponent=parseFloat(n[1]),this.normalize()}else if("NaN"==t)this.mantissa=Number.NaN,this.exponent=Number.NaN;else if(this.fromNumber(parseFloat(t)),isNaN(this.mantissa))throw Error("[DecimalError] Invalid argument: "+t);return this},e.prototype.fromValue=function(t){return t instanceof e?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.mantissa=0,this.exponent=0,this)},e.fromMantissaExponent=function(t,n){return(new e).fromMantissaExponent(t,n)},e.fromMantissaExponent_noNormalize=function(t,n){return(new e).fromMantissaExponent_noNormalize(t,n)},e.fromDecimal=function(t){return(new e).fromDecimal(t)},e.fromNumber=function(t){return(new e).fromNumber(t)},e.fromString=function(t){return(new e).fromString(t)},e.fromValue=function(t){return t instanceof e?t:new e(t)},e.prototype.toNumber=function(){if(!isFinite(this.exponent))return Number.NaN;if(this.exponent>308)return this.mantissa>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.exponent<-324)return 0;if(-324==this.exponent)return this.mantissa>0?5e-324:-5e-324;var t=this.mantissa*n[this.exponent+323];if(!isFinite(t)||this.exponent<0)return t;var e=Math.round(t);return Math.abs(e-t)<1e-10?e:t},e.prototype.mantissaWithDecimalPlaces=function(t){if(isNaN(this.mantissa)||isNaN(this.exponent))return Number.NaN;if(0==this.mantissa)return 0;var n=t+1,e=Math.ceil(Math.log10(Math.abs(this.mantissa))),o=Math.round(this.mantissa*Math.pow(10,n-e))*Math.pow(10,e-n);return parseFloat(o.toFixed(Math.max(n-e,0)))},e.prototype.toString=function(){return isNaN(this.mantissa)||isNaN(this.exponent)?"NaN":this.exponent>=9e15?this.mantissa>0?"Infinity":"-Infinity":this.exponent<=-9e15||0==this.mantissa?"0":this.exponent<21&&this.exponent>-7?this.toNumber().toString():this.mantissa+"e"+(this.exponent>=0?"+":"")+this.exponent},e.prototype.toExponential=function(n){if(isNaN(this.mantissa)||isNaN(this.exponent))return"NaN";if(this.exponent>=9e15)return this.mantissa>0?"Infinity":"-Infinity";if(this.exponent<=-9e15||0==this.mantissa)return"0"+(n>0?t(".",n+1,"0"):"")+"e+0";if(this.exponent>-324&&this.exponent<308)return this.toNumber().toExponential(n);isFinite(n)||(n=17);var e=n+1,o=Math.max(1,Math.ceil(Math.log10(Math.abs(this.mantissa))));return(Math.round(this.mantissa*Math.pow(10,e-o))*Math.pow(10,o-e)).toFixed(Math.max(e-o,0))+"e"+(this.exponent>=0?"+":"")+this.exponent},e.prototype.toFixed=function(n){return isNaN(this.mantissa)||isNaN(this.exponent)?"NaN":this.exponent>=9e15?this.mantissa>0?"Infinity":"-Infinity":this.exponent<=-9e15||0==this.mantissa?"0"+(n>0?t(".",n+1,"0"):""):this.exponent>=17?this.mantissa.toString().replace(".","").padEnd(this.exponent+1,"0")+(n>0?t(".",n+1,"0"):""):this.toNumber().toFixed(n+1)},e.prototype.toPrecision=function(t){return this.exponent<=-7?this.toExponential(t-1):t>this.exponent?this.toFixed(t-this.exponent-1):this.toExponential(t-1)},e.prototype.valueOf=function(){return this.toString()},e.prototype.toJSON=function(){return this.toString()},e.prototype.toStringWithDecimalPlaces=function(t){return this.toExponential(t)},Object.defineProperty(e.prototype,"m",{get:function(){return this.mantissa},set:function(t){this.mantissa=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"e",{get:function(){return this.exponent},set:function(t){this.exponent=t},enumerable:!0,configurable:!0}),e.prototype.abs=function(){return e.fromMantissaExponent(Math.abs(this.mantissa),this.exponent)},e.abs=function(t){return(t=e.fromValue(t)).abs()},e.prototype.neg=function(){return e.fromMantissaExponent(-this.mantissa,this.exponent)},e.neg=function(t){return(t=e.fromValue(t)).neg()},e.prototype.negate=function(){return this.neg()},e.negate=function(t){return(t=e.fromValue(t)).neg()},e.prototype.negated=function(){return this.neg()},e.negated=function(t){return(t=e.fromValue(t)).neg()},e.prototype.sign=function(){return Math.sign(this.mantissa)},e.sign=function(t){return(t=e.fromValue(t)).sign()},e.prototype.sgn=function(){return this.sign()},e.sgn=function(t){return(t=e.fromValue(t)).sign()},Object.defineProperty(e.prototype,"s",{get:function(){return this.sign()},set:function(t){0==t&&(this.e=0,this.m=0),this.sgn()!=t&&(this.m=-this.m)},enumerable:!0,configurable:!0}),e.prototype.round=function(){return this.exponent<-1?new e(0):this.exponent<17?new e(Math.round(this.toNumber())):this},e.round=function(t){return(t=e.fromValue(t)).round()},e.prototype.floor=function(){return this.exponent<-1?Math.sign(this.mantissa)>=0?new e(0):new e(-1):this.exponent<17?new e(Math.floor(this.toNumber())):this},e.floor=function(t){return(t=e.fromValue(t)).floor()},e.prototype.ceil=function(){return this.exponent<-1?Math.sign(this.mantissa)>0?new e(1):new e(0):this.exponent<17?new e(Math.ceil(this.toNumber())):this},e.ceil=function(t){return(t=e.fromValue(t)).ceil()},e.prototype.trunc=function(){return this.exponent<0?new e(0):this.exponent<17?new e(Math.trunc(this.toNumber())):this},e.trunc=function(t){return(t=e.fromValue(t)).trunc()},e.prototype.add=function(t){return t=e.fromValue(t),0==this.mantissa?t:0==t.mantissa?this:(this.exponent>=t.exponent?(o=this,r=t):(o=t,r=this),o.exponent-r.exponent>17?o:e.fromMantissaExponent(Math.round(1e14*o.mantissa+1e14*r.mantissa*n[r.exponent-o.exponent+323]),o.exponent-14));var o,r},e.add=function(t,n){return(t=e.fromValue(t)).add(n)},e.prototype.plus=function(t){return this.add(t)},e.plus=function(t,n){return(t=e.fromValue(t)).add(n)},e.prototype.sub=function(t){return t=e.fromValue(t),this.add(e.fromMantissaExponent(-t.mantissa,t.exponent))},e.sub=function(t,n){return(t=e.fromValue(t)).sub(n)},e.prototype.subtract=function(t){return this.sub(t)},e.subtract=function(t,n){return(t=e.fromValue(t)).sub(n)},e.prototype.minus=function(t){return this.sub(t)},e.minus=function(t,n){return(t=e.fromValue(t)).sub(n)},e.prototype.mul=function(t){return t=e.fromValue(t),e.fromMantissaExponent(this.mantissa*t.mantissa,this.exponent+t.exponent)},e.mul=function(t,n){return(t=e.fromValue(t)).mul(n)},e.prototype.multiply=function(t){return this.mul(t)},e.multiply=function(t,n){return(t=e.fromValue(t)).mul(n)},e.prototype.times=function(t){return this.mul(t)},e.times=function(t,n){return(t=e.fromValue(t)).mul(n)},e.prototype.div=function(t){return t=e.fromValue(t),this.mul(t.recip())},e.div=function(t,n){return(t=e.fromValue(t)).div(n)},e.prototype.divide=function(t){return this.div(t)},e.divide=function(t,n){return(t=e.fromValue(t)).div(n)},e.prototype.divideBy=function(t){return this.div(t)},e.prototype.dividedBy=function(t){return this.div(t)},e.prototype.recip=function(){return e.fromMantissaExponent(1/this.mantissa,-this.exponent)},e.recip=function(t){return(t=e.fromValue(t)).recip()},e.prototype.reciprocal=function(){return this.recip()},e.reciprocal=function(t){return(t=e.fromValue(t)).recip()},e.prototype.reciprocate=function(){return this.recip()},e.reciprocate=function(t){return(t=e.fromValue(t)).reciprocate()},e.prototype.cmp=function(t){if(t=e.fromValue(t),0==this.mantissa){if(0==t.mantissa)return 0;if(t.mantissa<0)return 1;if(t.mantissa>0)return-1}else if(0==t.mantissa){if(this.mantissa<0)return-1;if(this.mantissa>0)return 1}return this.mantissa>0?t.mantissa<0?1:this.exponent>t.exponent?1:this.exponent<t.exponent?-1:this.mantissa>t.mantissa?1:this.mantissa<t.mantissa?-1:0:this.mantissa<0?t.mantissa>0?-1:this.exponent>t.exponent?-1:this.exponent<t.exponent?1:this.mantissa>t.mantissa?1:this.mantissa<t.mantissa?-1:0:0},e.cmp=function(t,n){return(t=e.fromValue(t)).cmp(n)},e.prototype.compare=function(t){return this.cmp(t)},e.compare=function(t,n){return(t=e.fromValue(t)).cmp(n)},e.prototype.eq=function(t){return t=e.fromValue(t),this.exponent==t.exponent&&this.mantissa==t.mantissa},e.eq=function(t,n){return(t=e.fromValue(t)).eq(n)},e.prototype.equals=function(t){return this.eq(t)},e.equals=function(t,n){return(t=e.fromValue(t)).eq(n)},e.prototype.neq=function(t){return t=e.fromValue(t),this.exponent!=t.exponent||this.mantissa!=t.mantissa},e.neq=function(t,n){return(t=e.fromValue(t)).neq(n)},e.prototype.notEquals=function(t){return this.neq(t)},e.notEquals=function(t,n){return(t=e.fromValue(t)).notEquals(n)},e.prototype.lt=function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa>0:0==t.mantissa?this.mantissa<=0:this.exponent==t.exponent?this.mantissa<t.mantissa:this.mantissa>0?t.mantissa>0&&this.exponent<t.exponent:t.mantissa>0||this.exponent>t.exponent},e.lt=function(t,n){return(t=e.fromValue(t)).lt(n)},e.prototype.lte=function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa>=0:0==t.mantissa?this.mantissa<=0:this.exponent==t.exponent?this.mantissa<=t.mantissa:this.mantissa>0?t.mantissa>0&&this.exponent<t.exponent:t.mantissa>0||this.exponent>t.exponent},e.lte=function(t,n){return(t=e.fromValue(t)).lte(n)},e.prototype.gt=function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa<0:0==t.mantissa?this.mantissa>0:this.exponent==t.exponent?this.mantissa>t.mantissa:this.mantissa>0?t.mantissa<0||this.exponent>t.exponent:t.mantissa<0&&this.exponent<t.exponent},e.gt=function(t,n){return(t=e.fromValue(t)).gt(n)},e.prototype.gte=function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa<=0:0==t.mantissa?this.mantissa>0:this.exponent==t.exponent?this.mantissa>=t.mantissa:this.mantissa>0?t.mantissa<0||this.exponent>t.exponent:t.mantissa<0&&this.exponent<t.exponent},e.gte=function(t,n){return(t=e.fromValue(t)).gte(n)},e.prototype.max=function(t){return t=e.fromValue(t),this.gte(t)?this:t},e.max=function(t,n){return(t=e.fromValue(t)).max(n)},e.prototype.min=function(t){return t=e.fromValue(t),this.lte(t)?this:t},e.min=function(t,n){return(t=e.fromValue(t)).min(n)},e.prototype.cmp_tolerance=function(t,n){return t=e.fromValue(t),this.eq_tolerance(t,n)?0:this.cmp(t)},e.cmp_tolerance=function(t,n,o){return(t=e.fromValue(t)).cmp_tolerance(n,o)},e.prototype.compare_tolerance=function(t,n){return this.cmp_tolerance(t,n)},e.compare_tolerance=function(t,n,o){return(t=e.fromValue(t)).cmp_tolerance(n,o)},e.prototype.eq_tolerance=function(t,n){return t=e.fromValue(t),e.lte(this.sub(t).abs(),e.max(this.abs(),t.abs()).mul(n))},e.eq_tolerance=function(t,n,o){return(t=e.fromValue(t)).eq_tolerance(n,o)},e.prototype.equals_tolerance=function(t,n){return this.eq_tolerance(t,n)},e.equals_tolerance=function(t,n,o){return(t=e.fromValue(t)).eq_tolerance(n,o)},e.prototype.neq_tolerance=function(t,n){return t=e.fromValue(t),!this.eq_tolerance(t,n)},e.neq_tolerance=function(t,n,o){return(t=e.fromValue(t)).neq_tolerance(n,o)},e.prototype.notEquals_tolerance=function(t,n){return this.neq_tolerance(t,n)},e.notEquals_tolerance=function(t,n,o){return(t=e.fromValue(t)).notEquals_tolerance(n,o)},e.prototype.lt_tolerance=function(t,n){return t=e.fromValue(t),!this.eq_tolerance(t,n)&&this.lt(t)},e.lt_tolerance=function(t,n,o){return(t=e.fromValue(t)).lt_tolerance(n,o)},e.prototype.lte_tolerance=function(t,n){return t=e.fromValue(t),!!this.eq_tolerance(t,n)||this.lt(t)},e.lte_tolerance=function(t,n,o){return(t=e.fromValue(t)).lte_tolerance(n,o)},e.prototype.gt_tolerance=function(t,n){return t=e.fromValue(t),!this.eq_tolerance(t,n)&&this.gt(t)},e.gt_tolerance=function(t,n,o){return(t=e.fromValue(t)).gt_tolerance(n,o)},e.prototype.gte_tolerance=function(t,n){return t=e.fromValue(t),!!this.eq_tolerance(t,n)||this.gt(t)},e.gte_tolerance=function(t,n,o){return(t=e.fromValue(t)).gte_tolerance(n,o)},e.prototype.abslog10=function(){return this.exponent+Math.log10(Math.abs(this.mantissa))},e.prototype.log10=function(){return this.exponent+Math.log10(this.mantissa)},e.log10=function(t){return(t=e.fromValue(t)).log10()},e.prototype.log=function(t){return Math.LN10/Math.log(t)*this.log10()},e.log=function(t,n){return(t=e.fromValue(t)).log(n)},e.prototype.log2=function(){return 3.321928094887362*this.log10()},e.log2=function(t){return(t=e.fromValue(t)).log2()},e.prototype.ln=function(){return 2.302585092994046*this.log10()},e.ln=function(t){return(t=e.fromValue(t)).ln()},e.prototype.logarithm=function(t){return this.log(t)},e.logarithm=function(t,n){return(t=e.fromValue(t)).logarithm(n)},e.prototype.pow=function(t){t instanceof e&&(t=t.toNumber());var n=this.exponent*t;if(Number.isSafeInteger(n)){var o=Math.pow(this.mantissa,t);if(isFinite(o))return e.fromMantissaExponent(o,n)}var r=Math.trunc(n),i=n-r;o=Math.pow(10,t*Math.log10(this.mantissa)+i);if(isFinite(o))return e.fromMantissaExponent(o,r);var s=e.pow10(t*this.abslog10());return-1==this.sign()&&t%2==1?s.neg():s},e.pow10=function(t){return Number.isInteger(t)?e.fromMantissaExponent_noNormalize(1,t):e.fromMantissaExponent(Math.pow(10,t%1),Math.trunc(t))},e.prototype.pow_base=function(t){return(t=e.fromValue(t)).pow(this)},e.pow=function(t,n){return 10===t&&"number"==typeof n&&Number.isInteger(n)?e.fromMantissaExponent(1,n):(t=e.fromValue(t)).pow(n)},e.prototype.factorial=function(){var t=this.toNumber()+1;return e.pow(t/Math.E*Math.sqrt(t*Math.sinh(1/t)+1/(810*Math.pow(t,6))),t).mul(Math.sqrt(2*Math.PI/t))},e.prototype.exp=function(){var t=this.toNumber();if(-706<t&&t<709)return e.fromNumber(Math.exp(t));var n=void 0,o=void 0;return n=0,(o=this.exponent)>=0&&(t-=(n=Math.trunc(t/Math.LN10))*Math.LN10)>=Math.LN10&&(++n,t-=Math.LN10),t<0&&(--n,t+=Math.LN10),t=Math.exp(t),0!=n&&(o=Math.floor(n),e.fromMantissaExponent(t,o)),e.fromNumber(t)},e.exp=function(t){return(t=e.fromValue(t)).exp()},e.prototype.sqr=function(){return e.fromMantissaExponent(Math.pow(this.mantissa,2),2*this.exponent)},e.sqr=function(t){return(t=e.fromValue(t)).sqr()},e.prototype.sqrt=function(){return this.mantissa<0?new e(Number.NaN):this.exponent%2!=0?e.fromMantissaExponent(3.16227766016838*Math.sqrt(this.mantissa),Math.floor(this.exponent/2)):e.fromMantissaExponent(Math.sqrt(this.mantissa),Math.floor(this.exponent/2))},e.sqrt=function(t){return(t=e.fromValue(t)).sqrt()},e.prototype.cube=function(){return e.fromMantissaExponent(Math.pow(this.mantissa,3),3*this.exponent)},e.cube=function(t){return(t=e.fromValue(t)).cube()},e.prototype.cbrt=function(){var t=1,n=this.mantissa;n<0&&(t=-1,n=-n);var o=t*Math.pow(n,1/3),r=this.exponent%3;return 1==r||-1==r?e.fromMantissaExponent(2.154434690031884*o,Math.floor(this.exponent/3)):0!=r?e.fromMantissaExponent(4.641588833612779*o,Math.floor(this.exponent/3)):e.fromMantissaExponent(o,Math.floor(this.exponent/3))},e.cbrt=function(t){return(t=e.fromValue(t)).cbrt()},e.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},e.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},e.prototype.tanh=function(){return this.sinh().div(this.cosh())},e.prototype.asinh=function(){return e.ln(this.add(this.sqr().add(1).sqrt()))},e.prototype.acosh=function(){return e.ln(this.add(this.sqr().sub(1).sqrt()))},e.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:e.ln(this.add(1).div(new e(1).sub(this)))/2},e.affordGeometricSeries=function(t,n,o,r){t=e.fromValue(t),n=e.fromValue(n),o=e.fromValue(o);var i=n.mul(e.pow(o,r));return e.floor(e.log10(t.div(i).mul(o.sub(1)).add(1))/e.log10(o))},e.sumGeometricSeries=function(t,n,o,r){return n=e.fromValue(n),o=e.fromValue(o),n.mul(e.pow(o,r)).mul(e.sub(1,e.pow(o,t))).div(e.sub(1,o))},e.affordArithmeticSeries=function(t,n,o,r){t=e.fromValue(t),n=e.fromValue(n),o=e.fromValue(o),r=e.fromValue(r);var i=n.add(e.mul(r,o)).sub(o.div(2)),s=i.pow(2);return e.floor(i.neg().add(e.sqrt(s.add(e.mul(o,t).mul(2)))).div(o))},e.sumArithmeticSeries=function(t,n,o,r){t=e.fromValue(t),n=e.fromValue(n),o=e.fromValue(o),r=e.fromValue(r);var i=n.add(e.mul(r,o));return e.div(t,2).mul(e.mul(2,i).plus(t.sub(1).mul(o)))},e.prototype.ascensionPenalty=function(t){return 0==t?this:this.pow(Math.pow(10,-t))},e.efficiencyOfPurchase=function(t,n,o){return t=e.fromValue(t),n=e.fromValue(n),o=e.fromValue(o),e.add(t.div(n),t.div(o))},e.prototype.egg=function(){return this.add(9)},e.prototype.lessThanOrEqualTo=function(t){return this.cmp(t)<1},e.prototype.lessThan=function(t){return this.cmp(t)<0},e.prototype.greaterThanOrEqualTo=function(t){return this.cmp(t)>-1},e.prototype.greaterThan=function(t){return this.cmp(t)>0},e.randomDecimalForTesting=function(t){if(20*Math.random()<1)return e.fromMantissaExponent(0,0);var n=10*Math.random();10*Math.random()<1&&(n=Math.round(n)),n*=Math.sign(2*Math.random()-1);var o=Math.floor(Math.random()*t*2)-t;return e.fromMantissaExponent(n,o)},e}()});
